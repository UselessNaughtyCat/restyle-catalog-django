{% extends "base.html" %}
{% block title %}{{ style.name }}{% endblock %}
{% load staticfiles %}
{% block js-head %}
<script src={% static "js/style-events.js" %}></script> 
{% endblock %}

{% block main %}
<div class="row">
    <div class="col-sm-12 col-lg-9 col-xl-10">
        <div class="h1 m-0 font-weight-bold">{{ style.name }}</div>
        <div class="h5 mt-1 text-muted">Автор: <a href="{% url 'person' style.creator.id %}">{{ style.creator }}</a></div>
    </div>
    <div class="col-sm-12 col-lg-3 col-xl-2">
        {% if user.is_authenticated %}
        {% if person_is_current %}
        <div class="dropdown m-0">
            <button class="btn btn-outline-secondary btn-lg w-100 dropdown-toggle" type="button" id="dd-creatorAction" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Действия
            </button>
            <div class="dropdown-menu w-100" aria-labelledby="dd-creatorAction">
                <a href="{% url 'style-update' style.id %}" class="dropdown-item">Изменить</a>
                <a href="{% url 'style-delete' style.id %}" class="dropdown-item">Удалить</a>
            </div>
        </div>
        {% else %}
        <button type="button" id="btnSub-{{ style.id }}" class="btn btn-outline-secondary btn-lg w-100">
            {% if person_is_subscibed %} Отписаться {% else %} Подписаться {% endif %}
        </button>
        <div id="star-rating" class="mt-1 text-center rating">
            <span id="rate-{{ style.id }}-5" class="star">☆</span>
            <span id="rate-{{ style.id }}-4" class="star">☆</span>
            <span id="rate-{{ style.id }}-3" class="star">☆</span>
            <span id="rate-{{ style.id }}-2" class="star">☆</span>
            <span id="rate-{{ style.id }}-1" class="star">☆</span>
        </div>
        {% endif %}
        {% endif %}
    </div>
</div>

<div id="crl-styleScreenshots" class="carousel slide border-top border-bottom my-4" data-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img class="d-block w-75 mx-auto" src="{{ style.logo.url }}" alt="First slide">
        </div>
        <div class="carousel-item">
            <img class="d-block w-75" src="{{ style.logo.url }}" alt="Second slide">
        </div>
    </div>
    <a class="carousel-control-prev" href="#crl-styleScreenshots" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#crl-styleScreenshots" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<table class="table table-borderless text-center">
    <tr>
        <td><div>
            <h5 class="text-muted">Подписок</h5>
            <h2 id="subs-count">{{ style.subscribed }}</h2>
        </div></td>
        <td><div>
            <h5 class="text-muted">Рейтинг</h5>
            <h2 id="average-rating">{{ style.average_rating }}</h2>
        </div></td>
    </tr>
</table>
<hr class="my-4">
<h6 class="font-weight-bold">Описание:</h6>
<p class="text-small-padding white-space-pre">{{ style.description }}</p>
<hr class="my-4">
<h6 class="font-weight-bold">Подробнее:</h6>
<div class="row">
    <div class="col-12 col-lg-4">
        <table class="table table-borderless">
            <tr>
                <th scope="row">Для сайта</th>
                <td><a href="http://{{ style.site.url }}">{{ style.site }}</a></td>
            </tr>
            <tr>
                <th scope="row">Дата публикации</th>
                <td>{{ style.upload_date }}</td>
            </tr>
            <tr>
                <th scope="row">Последнее обновление</th>
                <td>{{ style.last_update }}</td>
            </tr>
        </table>
    </div>
</div>
<hr class="my-4">
{% endblock %}